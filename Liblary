-- üíé Ultra-Smooth Roblox UI Library with Cinematic Blur Intro
-- Complete implementation with all interactive components

local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local Library = {}
Library.__index = Library

-- üé® Theme Presets
Library.Themes = {
    Dark = {
        Primary = Color3.fromRGB(28, 28, 35),
        Secondary = Color3.fromRGB(38, 38, 45),
        Accent = Color3.fromRGB(88, 101, 242),
        Text = Color3.fromRGB(255, 255, 255),
        TextDim = Color3.fromRGB(180, 180, 190),
        Border = Color3.fromRGB(55, 55, 65),
        Success = Color3.fromRGB(67, 181, 129),
        Error = Color3.fromRGB(240, 71, 71),
        Warning = Color3.fromRGB(250, 166, 26)
    },
    Light = {
        Primary = Color3.fromRGB(245, 245, 250),
        Secondary = Color3.fromRGB(255, 255, 255),
        Accent = Color3.fromRGB(88, 101, 242),
        Text = Color3.fromRGB(30, 30, 35),
        TextDim = Color3.fromRGB(100, 100, 110),
        Border = Color3.fromRGB(220, 220, 230),
        Success = Color3.fromRGB(67, 181, 129),
        Error = Color3.fromRGB(240, 71, 71),
        Warning = Color3.fromRGB(250, 166, 26)
    },
    Vaporwave = {
        Primary = Color3.fromRGB(20, 16, 40),
        Secondary = Color3.fromRGB(30, 25, 50),
        Accent = Color3.fromRGB(255, 71, 186),
        Text = Color3.fromRGB(255, 255, 255),
        TextDim = Color3.fromRGB(200, 180, 255),
        Border = Color3.fromRGB(138, 73, 244),
        Success = Color3.fromRGB(0, 255, 255),
        Error = Color3.fromRGB(255, 71, 186),
        Warning = Color3.fromRGB(255, 215, 0)
    }
}

-- ‚öôÔ∏è Configuration
Library.Config = {
    IntroEnabled = true,
    IntroDuration = 3.5,
    IntroTitle = "UI Library",
    IntroSubtitle = "Premium Experience",
    BlurIntensity = 25,
    BlurPulseRange = 5,
    AnimationSpeed = 0.4,
    CurrentTheme = "Dark"
}

-- Helper to get current theme
function Library:GetTheme()
    return self.Themes[self.Config.CurrentTheme] or self.Themes.Dark
end

-- üé¨ Cinematic Intro System
function Library:CreateCinematicIntro()
    local player = game.Players.LocalPlayer
    local playerGui = player:WaitForChild("PlayerGui")
    
    -- Create blur effect
    local blur = Instance.new("BlurEffect")
    blur.Name = "CinematicBlur"
    blur.Size = 0
    blur.Parent = game.Lighting
    
    -- Create intro screen GUI
    local introGui = Instance.new("ScreenGui")
    introGui.Name = "CinematicIntro"
    introGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    introGui.Parent = playerGui
    
    -- Dim overlay
    local dimOverlay = Instance.new("Frame")
    dimOverlay.Name = "DimOverlay"
    dimOverlay.Size = UDim2.new(1, 0, 1, 0)
    dimOverlay.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    dimOverlay.BackgroundTransparency = 1
    dimOverlay.BorderSizePixel = 0
    dimOverlay.Parent = introGui
    
    -- Center popup container
    local popup = Instance.new("Frame")
    popup.Name = "IntroPopup"
    popup.Size = UDim2.new(0, 500, 0, 280)
    popup.Position = UDim2.new(0.5, 0, 0.5, 0)
    popup.AnchorPoint = Vector2.new(0.5, 0.5)
    popup.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
    popup.BackgroundTransparency = 1
    popup.BorderSizePixel = 0
    popup.Parent = introGui
    
    local popupCorner = Instance.new("UICorner")
    popupCorner.CornerRadius = UDim.new(0, 16)
    popupCorner.Parent = popup
    
    local popupStroke = Instance.new("UIStroke")
    popupStroke.Color = Color3.fromRGB(80, 80, 95)
    popupStroke.Thickness = 1.5
    popupStroke.Transparency = 1
    popupStroke.Parent = popup
    
    -- Title text
    local title = Instance.new("TextLabel")
    title.Name = "Title"
    title.Size = UDim2.new(1, -60, 0, 50)
    title.Position = UDim2.new(0, 30, 0, 80)
    title.BackgroundTransparency = 1
    title.Font = Enum.Font.GothamBold
    title.Text = self.Config.IntroTitle
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.TextSize = 38
    title.TextTransparency = 1
    title.Parent = popup
    
    -- Subtitle text
    local subtitle = Instance.new("TextLabel")
    subtitle.Name = "Subtitle"
    subtitle.Size = UDim2.new(1, -60, 0, 30)
    subtitle.Position = UDim2.new(0, 30, 0, 145)
    subtitle.BackgroundTransparency = 1
    subtitle.Font = Enum.Font.Gotham
    subtitle.Text = self.Config.IntroSubtitle
    subtitle.TextColor3 = Color3.fromRGB(180, 180, 200)
    subtitle.TextSize = 18
    subtitle.TextTransparency = 1
    subtitle.Parent = popup
    
    -- Accent line
    local accentLine = Instance.new("Frame")
    accentLine.Name = "AccentLine"
    accentLine.Size = UDim2.new(0, 0, 0, 3)
    accentLine.Position = UDim2.new(0.5, 0, 0, 190)
    accentLine.AnchorPoint = Vector2.new(0.5, 0)
    accentLine.BackgroundColor3 = Color3.fromRGB(88, 101, 242)
    accentLine.BorderSizePixel = 0
    accentLine.Parent = popup
    
    local lineCorner = Instance.new("UICorner")
    lineCorner.CornerRadius = UDim.new(1, 0)
    lineCorner.Parent = accentLine
    
    -- Animation sequence
    local function playIntro()
        -- Step 1: Blur activation
        TweenService:Create(blur, TweenInfo.new(0.8, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            Size = self.Config.BlurIntensity
        }):Play()
        
        TweenService:Create(dimOverlay, TweenInfo.new(0.8, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            BackgroundTransparency = 0.3
        }):Play()
        
        task.wait(0.5)
        
        -- Step 2: Popup entrance
        popup.Size = UDim2.new(0, 425, 0, 238)
        
        local popupScaleTween = TweenService:Create(popup, TweenInfo.new(0.6, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
            Size = UDim2.new(0, 500, 0, 280)
        })
        
        local popupFadeTween = TweenService:Create(popup, TweenInfo.new(0.6, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            BackgroundTransparency = 0.15
        })
        
        local strokeFadeTween = TweenService:Create(popupStroke, TweenInfo.new(0.6, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            Transparency = 0.3
        })
        
        popupScaleTween:Play()
        popupFadeTween:Play()
        strokeFadeTween:Play()
        
        task.wait(0.3)
        
        -- Step 3: Title animation
        title.Position = UDim2.new(0, 30, 0, 100)
        
        TweenService:Create(title, TweenInfo.new(0.7, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            Position = UDim2.new(0, 30, 0, 80),
            TextTransparency = 0
        }):Play()
        
        task.wait(0.2)
        
        -- Step 4: Subtitle animation
        subtitle.Position = UDim2.new(0, 30, 0, 165)
        
        TweenService:Create(subtitle, TweenInfo.new(0.8, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            Position = UDim2.new(0, 30, 0, 145),
            TextTransparency = 0
        }):Play()
        
        -- Accent line expand
        TweenService:Create(accentLine, TweenInfo.new(0.8, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            Size = UDim2.new(0, 120, 0, 3)
        }):Play()
        
        -- Step 5: Blur pulse effect
        local pulseStart = tick()
        local pulseConnection
        pulseConnection = RunService.RenderStepped:Connect(function()
            if tick() - pulseStart > 2.5 then
                pulseConnection:Disconnect()
                return
            end
            
            local pulseTime = (tick() - pulseStart) * 1.5
            local pulseValue = math.sin(pulseTime) * self.Config.BlurPulseRange
            blur.Size = self.Config.BlurIntensity + pulseValue
        end)
        
        task.wait(self.Config.IntroDuration)
        
        -- Step 6: Exit transition
        TweenService:Create(popup, TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.In), {
            BackgroundTransparency = 1
        }):Play()
        
        TweenService:Create(title, TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.In), {
            TextTransparency = 1
        }):Play()
        
        TweenService:Create(subtitle, TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.In), {
            TextTransparency = 1
        }):Play()
        
        TweenService:Create(popupStroke, TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.In), {
            Transparency = 1
        }):Play()
        
        task.wait(0.3)
        
        TweenService:Create(blur, TweenInfo.new(0.7, Enum.EasingStyle.Quad, Enum.EasingDirection.In), {
            Size = 0
        }):Play()
        
        TweenService:Create(dimOverlay, TweenInfo.new(0.7, Enum.EasingStyle.Quad, Enum.EasingDirection.In), {
            BackgroundTransparency = 1
        }):Play()
        
        task.wait(0.7)
        
        introGui:Destroy()
        blur:Destroy()
    end
    
    spawn(function()
        playIntro()
    end)
end

-- ü™ü Window System
function Library:CreateWindow(config)
    config = config or {}
    local windowTitle = config.Title or "UI Window"
    local windowSize = config.Size or UDim2.new(0, 550, 0, 600)
    
    local player = game.Players.LocalPlayer
    local playerGui = player:WaitForChild("PlayerGui")
    
    local window = {}
    window.Tabs = {}
    window.CurrentTab = nil
    
    -- Create main GUI
    local gui = Instance.new("ScreenGui")
    gui.Name = "UILibrary_" .. windowTitle
    gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    gui.ResetOnSpawn = false
    gui.Parent = playerGui
    
    -- Main window frame
    local mainFrame = Instance.new("Frame")
    mainFrame.Name = "MainWindow"
    mainFrame.Size = windowSize
    mainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
    mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    mainFrame.BackgroundColor3 = self:GetTheme().Primary
    mainFrame.BorderSizePixel = 0
    mainFrame.BackgroundTransparency = 1
    mainFrame.Parent = gui
    
    local mainCorner = Instance.new("UICorner")
    mainCorner.CornerRadius = UDim.new(0, 12)
    mainCorner.Parent = mainFrame
    
    local mainStroke = Instance.new("UIStroke")
    mainStroke.Color = self:GetTheme().Border
    mainStroke.Thickness = 1
    mainStroke.Transparency = 0.5
    mainStroke.Parent = mainFrame
    
    -- Title bar
    local titleBar = Instance.new("Frame")
    titleBar.Name = "TitleBar"
    titleBar.Size = UDim2.new(1, 0, 0, 45)
    titleBar.BackgroundColor3 = self:GetTheme().Secondary
    titleBar.BorderSizePixel = 0
    titleBar.Parent = mainFrame
    
    local titleCorner = Instance.new("UICorner")
    titleCorner.CornerRadius = UDim.new(0, 12)
    titleCorner.Parent = titleBar
    
    -- Title text
    local titleLabel = Instance.new("TextLabel")
    titleLabel.Name = "TitleLabel"
    titleLabel.Size = UDim2.new(1, -120, 1, 0)
    titleLabel.Position = UDim2.new(0, 15, 0, 0)
    titleLabel.BackgroundTransparency = 1
    titleLabel.Font = Enum.Font.GothamBold
    titleLabel.Text = windowTitle
    titleLabel.TextColor3 = self:GetTheme().Text
    titleLabel.TextSize = 16
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left
    titleLabel.Parent = titleBar
    
    -- Control buttons container
    local controlsFrame = Instance.new("Frame")
    controlsFrame.Name = "Controls"
    controlsFrame.Size = UDim2.new(0, 100, 0, 30)
    controlsFrame.Position = UDim2.new(1, -110, 0.5, 0)
    controlsFrame.AnchorPoint = Vector2.new(0, 0.5)
    controlsFrame.BackgroundTransparency = 1
    controlsFrame.Parent = titleBar
    
    local controlsLayout = Instance.new("UIListLayout")
    controlsLayout.FillDirection = Enum.FillDirection.Horizontal
    controlsLayout.HorizontalAlignment = Enum.HorizontalAlignment.Right
    controlsLayout.Padding = UDim.new(0, 8)
    controlsLayout.Parent = controlsFrame
    
    -- Helper function for control buttons
    local function createControlButton(text, color, callback)
        local btn = Instance.new("TextButton")
        btn.Size = UDim2.new(0, 28, 0, 28)
        btn.BackgroundColor3 = color
        btn.BackgroundTransparency = 0.8
        btn.BorderSizePixel = 0
        btn.Font = Enum.Font.GothamBold
        btn.Text = text
        btn.TextColor3 = Color3.white
        btn.TextSize = 16
        btn.Parent = controlsFrame
        
        local btnCorner = Instance.new("UICorner")
        btnCorner.CornerRadius = UDim.new(0, 6)
        btnCorner.Parent = btn
        
        btn.MouseEnter:Connect(function()
            TweenService:Create(btn, TweenInfo.new(0.2), {BackgroundTransparency = 0.5}):Play()
        end)
        
        btn.MouseLeave:Connect(function()
            TweenService:Create(btn, TweenInfo.new(0.2), {BackgroundTransparency = 0.8}):Play()
        end)
        
        btn.MouseButton1Click:Connect(callback)
        
        return btn
    end
    
    -- Minimize button
    createControlButton("‚Äì", Color3.fromRGB(250, 166, 26), function()
        local targetSize = mainFrame.Size == windowSize and UDim2.new(0, 250, 0, 45) or windowSize
        TweenService:Create(mainFrame, TweenInfo.new(0.4, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            Size = targetSize
        }):Play()
    end)
    
    -- Close button
    createControlButton("X", Color3.fromRGB(240, 71, 71), function()
        TweenService:Create(mainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.In), {
            BackgroundTransparency = 1,
            Size = UDim2.new(0, 0, 0, 0)
        }):Play()
        task.wait(0.3)
        gui:Destroy()
    end)
    
    -- Content container
    local contentFrame = Instance.new("Frame")
    contentFrame.Name = "Content"
    contentFrame.Size = UDim2.new(1, -20, 1, -65)
    contentFrame.Position = UDim2.new(0, 10, 0, 55)
    contentFrame.BackgroundTransparency = 1
    contentFrame.Parent = mainFrame
    
    -- Tab system container
    local tabBar = Instance.new("Frame")
    tabBar.Name = "TabBar"
    tabBar.Size = UDim2.new(0, 150, 1, 0)
    tabBar.BackgroundColor3 = self:GetTheme().Secondary
    tabBar.BorderSizePixel = 0
    tabBar.Parent = contentFrame
    
    local tabBarCorner = Instance.new("UICorner")
    tabBarCorner.CornerRadius = UDim.new(0, 8)
    tabBarCorner.Parent = tabBar
    
    local tabListLayout = Instance.new("UIListLayout")
    tabListLayout.Padding = UDim.new(0, 5)
    tabListLayout.Parent = tabBar
    
    -- Tab content area
    local tabContent = Instance.new("Frame")
    tabContent.Name = "TabContent"
    tabContent.Size = UDim2.new(1, -165, 1, 0)
    tabContent.Position = UDim2.new(0, 160, 0, 0)
    tabContent.BackgroundTransparency = 1
    tabContent.Parent = contentFrame
    
    -- Dragging functionality
    local dragging, dragInput, dragStart, startPos
    
    titleBar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = mainFrame.Position
            
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    
    titleBar.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            dragInput = input
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            local delta = input.Position - dragStart
            mainFrame.Position = UDim2.new(
                startPos.X.Scale, startPos.X.Offset + delta.X,
                startPos.Y.Scale, startPos.Y.Offset + delta.Y
            )
        end
    end)
    
    -- Fade in animation
    TweenService:Create(mainFrame, TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        BackgroundTransparency = 0
    }):Play()
    
    window.GUI = gui
    window.MainFrame = mainFrame
    window.TabBar = tabBar
    window.TabContent = tabContent
    window.Library = self
    
    return window
end

-- üìë Tab System
function Library:CreateTab(window, config)
    config = config or {}
    local tabName = config.Name or "Tab"
    
    local tab = {}
    tab.Elements = {}
    
    -- Tab button
    local tabButton = Instance.new("TextButton")
    tabButton.Name = tabName
    tabButton.Size = UDim2.new(1, -10, 0, 35)
    tabButton.BackgroundColor3 = self:GetTheme().Primary
    tabButton.BackgroundTransparency = 0.5
    tabButton.BorderSizePixel = 0
    tabButton.Font = Enum.Font.Gotham
    tabButton.Text = tabName
    tabButton.TextColor3 = self:GetTheme().TextDim
    tabButton.TextSize = 14
    tabButton.Parent = window.TabBar
    
    local tabCorner = Instance.new("UICorner")
    tabCorner.CornerRadius = UDim.new(0, 6)
    tabCorner.Parent = tabButton
    
    -- Tab content frame
    local tabFrame = Instance.new("ScrollingFrame")
    tabFrame.Name = tabName .. "Content"
    tabFrame.Size = UDim2.new(1, 0, 1, 0)
    tabFrame.BackgroundTransparency = 1
    tabFrame.BorderSizePixel = 0
    tabFrame.ScrollBarThickness = 4
    tabFrame.ScrollBarImageColor3 = self:GetTheme().Accent
    tabFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
    tabFrame.Visible = false
    tabFrame.Parent = window.TabContent
    
    local tabLayout = Instance.new("UIListLayout")
    tabLayout.Padding = UDim.new(0, 8)
    tabLayout.Parent = tabFrame
    
    tabLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        tabFrame.CanvasSize = UDim2.new(0, 0, 0, tabLayout.AbsoluteContentSize.Y + 10)
    end)
    
    -- Tab switching logic
    tabButton.MouseButton1Click:Connect(function()
        for _, otherTab in pairs(window.Tabs) do
            otherTab.Button.BackgroundTransparency = 0.5
            otherTab.Button.TextColor3 = self:GetTheme().TextDim
            otherTab.Frame.Visible = false
        end
        
        tabButton.BackgroundTransparency = 0
        tabButton.TextColor3 = self:GetTheme().Text
        tabFrame.Visible = true
        window.CurrentTab = tab
    end)
    
    -- Hover effects
    tabButton.MouseEnter:Connect(function()
        if window.CurrentTab ~= tab then
            TweenService:Create(tabButton, TweenInfo.new(0.2), {BackgroundTransparency = 0.3}):Play()
        end
    end)
    
    tabButton.MouseLeave:Connect(function()
        if window.CurrentTab ~= tab then
            TweenService:Create(tabButton, TweenInfo.new(0.2), {BackgroundTransparency = 0.5}):Play()
        end
    end)
    
    tab.Button = tabButton
    tab.Frame = tabFrame
    tab.Library = self
    table.insert(window.Tabs, tab)
    
    -- Auto-select first tab
    if #window.Tabs == 1 then
        tabButton.BackgroundTransparency = 0
        tabButton.TextColor3 = self:GetTheme().Text
        tabFrame.Visible = true
        window.CurrentTab = tab
    end
    
    return tab
end

-- üîò Button Component
function Library:AddButton(tab, config)
    config = config or {}
    local buttonText = config.Text or "Button"
    local callback = config.Callback or function() end
    
    local button = Instance.new("TextButton")
    button.Name = "Button"
    button.Size = UDim2.new(1, -10, 0, 38)
    button.BackgroundColor3 = self:GetTheme().Accent
    button.BorderSizePixel = 0
    button.Font = Enum.Font.GothamBold
    button.Text = buttonText
    button.TextColor3 = Color3.white
    button.TextSize = 14
    button.Parent = tab.Frame
    
    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, 8)
    btnCorner.Parent = button
    
    button.MouseEnter:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.2), {
            BackgroundColor3 = Color3.fromRGB(
                math.min(self:GetTheme().Accent.R * 255 + 20, 255),
                math.min(self:GetTheme().Accent.G * 255 + 20, 255),
                math.min(self:GetTheme().Accent.B * 255 + 20, 255)
            )
        }):Play()
        TweenService:Create(button, TweenInfo.new(0.2), {Size = UDim2.new(1, -8, 0, 38)}):Play()
    end)
    
    button.MouseLeave:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.2), {
            BackgroundColor3 = self:GetTheme().Accent
        }):Play()
        TweenService:Create(button, TweenInfo.new(0.2), {Size = UDim2.new(1, -10, 0, 38)}):Play()
    end)
    
    button.MouseButton1Click:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.1), {Size = UDim2.new(1, -12, 0, 36)}):Play()
        task.wait(0.1)
        TweenService:Create(button, TweenInfo.new(0.1), {Size = UDim2.new(1, -10, 0, 38)}):Play()
        spawn(function()
            callback()
        end)
    end)
    
    return button
end

-- üîÑ Toggle Component
function Library:AddToggle(tab, config)
    config = config or {}
    local toggleText = config.Text or "Toggle"
    local defaultValue = config.Default or false
    local callback = config.Callback or function() end
    
    local toggleFrame = Instance.new("Frame")
    toggleFrame.Name = "Toggle"
    toggleFrame.Size = UDim2.new(1, -10, 0, 40)
    toggleFrame.BackgroundColor3 = self:GetTheme().Secondary
    toggleFrame.BorderSizePixel = 0
    toggleFrame.Parent = tab.Frame
    
    local toggleCorner = Instance.new("UICorner")
    toggleCorner.CornerRadius = UDim.new(0, 8)
    toggleCorner.Parent = toggleFrame
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -70, 1, 0)
    label.Position = UDim2.new(0, 15, 0, 0)
    label.BackgroundTransparency = 1
    label.Font = Enum.Font.Gotham
    label.Text = toggleText
    label.TextColor3 = self:GetTheme().Text
    label.TextSize = 14
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = toggleFrame
    
    local toggleButton = Instance.new("TextButton")
    toggleButton.Size = UDim2.new(0, 50, 0, 26)
    toggleButton.Position = UDim2.new(1, -60, 0.5, 0)
    toggleButton.AnchorPoint = Vector2.new(0, 0.5)
    toggleButton.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
    toggleButton.BorderSizePixel = 0
    toggleButton.Text = ""
    toggleButton.Parent = toggleFrame
    
    local toggleBtnCorner = Instance.new("UICorner")
    toggleBtnCorner.CornerRadius = UDim.new(1, 0)
    toggleBtnCorner.Parent = toggleButton
    
    local toggleThumb = Instance.new("Frame")
    toggleThumb.Size = UDim2.new(0, 20, 0, 20)
    toggleThumb.Position = UDim2.new(0, 3, 0.5, 0)
    toggleThumb.AnchorPoint = Vector2.new(0, 0.5)
    toggleThumb.BackgroundColor3 = Color3.white
    toggleThumb.BorderSizePixel = 0
    toggleThumb.Parent = toggleButton
    
    local thumbCorner = Instance.new("UICorner")
    thumbCorner.CornerRadius = UDim.new(1, 0)
    thumbCorner.Parent = toggleThumb
    
    local toggled = defaultValue
    
    local function updateToggle()
        if toggled then
            TweenService:Create(toggleButton, TweenInfo.new(0.3, Enum.EasingStyle.Quad), {
                BackgroundColor3 = self:GetTheme().Accent
            }):Play()
            TweenService:Create(toggleThumb, TweenInfo.new(0.3, Enum.EasingStyle.Quad), {
                Position = UDim2.new(1, -23, 0.5, 0)
            }):Play()
        else
            TweenService:Create(toggleButton, TweenInfo.new(0.3, Enum.EasingStyle.Quad), {
                BackgroundColor3 = Color3.fromRGB(60, 60, 70)
            }):Play()
            TweenService:Create(toggleThumb, TweenInfo.new(0.3, Enum.EasingStyle.Quad), {
                Position = UDim2.new(0, 3, 0.5, 0)
            }):Play()
        end
        spawn(function()
            callback(toggled)
        end)
    end
    
    toggleButton.MouseButton1Click:Connect(function()
        toggled = not toggled
        updateToggle()
    end)
    
    updateToggle()
    return toggleFrame
end

-- üéöÔ∏è Slider Component
function Library:AddSlider(tab, config)
    config = config or {}
    local sliderText = config.Text or "Slider"
    local minValue = config.Min or 0
    local maxValue = config.Max or 100
    local defaultValue = config.Default or 50
    local callback = config.Callback or function() end
    
    local sliderFrame = Instance.new("Frame")
    sliderFrame.Name = "Slider"
    sliderFrame.Size = UDim2.new(1, -10, 0, 55)
    sliderFrame.BackgroundColor3 = self:GetTheme().Secondary
    sliderFrame.BorderSizePixel = 0
    sliderFrame.Parent = tab.Frame
    
    local sliderCorner = Instance.new("UICorner")
    sliderCorner.CornerRadius = UDim.new(0, 8)
    sliderCorner.Parent = sliderFrame
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -70, 0, 20)
    label.Position = UDim2.new(0, 15, 0, 8)
    label.BackgroundTransparency = 1
    label.Font = Enum.Font.Gotham
    label.Text = sliderText
    label.TextColor3 = self:GetTheme().Text
    label.TextSize = 14
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = sliderFrame
    
    local valueLabel = Instance.new("TextLabel")
    valueLabel.Size = UDim2.new(0, 50, 0, 20)
    valueLabel.Position = UDim2.new(1, -60, 0, 8)
    valueLabel.BackgroundTransparency = 1
    valueLabel.Font = Enum.Font.GothamBold
    valueLabel.Text = tostring(defaultValue)
    valueLabel.TextColor3 = self:GetTheme().Accent
    valueLabel.TextSize = 14
    valueLabel.TextXAlignment = Enum.TextXAlignment.Right
    valueLabel.Parent = sliderFrame
    
    local sliderBar = Instance.new("Frame")
    sliderBar.Size = UDim2.new(1, -30, 0, 6)
    sliderBar.Position = UDim2.new(0, 15, 1, -18)
    sliderBar.BackgroundColor3 = Color3.fromRGB(50, 50, 60)
    sliderBar.BorderSizePixel = 0
    sliderBar.Parent = sliderFrame
    
    local barCorner = Instance.new("UICorner")
    barCorner.CornerRadius = UDim.new(1, 0)
    barCorner.Parent = sliderBar
    
    local sliderFill = Instance.new("Frame")
    sliderFill.Size = UDim2.new((defaultValue - minValue) / (maxValue - minValue), 0, 1, 0)
    sliderFill.BackgroundColor3 = self:GetTheme().Accent
    sliderFill.BorderSizePixel = 0
    sliderFill.Parent = sliderBar
    
    local fillCorner = Instance.new("UICorner")
    fillCorner.CornerRadius = UDim.new(1, 0)
    fillCorner.Parent = sliderFill
    
    local sliderThumb = Instance.new("Frame")
    sliderThumb.Size = UDim2.new(0, 16, 0, 16)
    sliderThumb.Position = UDim2.new((defaultValue - minValue) / (maxValue - minValue), 0, 0.5, 0)
    sliderThumb.AnchorPoint = Vector2.new(0.5, 0.5)
    sliderThumb.BackgroundColor3 = Color3.white
    sliderThumb.BorderSizePixel = 0
    sliderThumb.Parent = sliderBar
    
    local thumbCorner = Instance.new("UICorner")
    thumbCorner.CornerRadius = UDim.new(1, 0)
    thumbCorner.Parent = sliderThumb
    
    local dragging = false
    
    local function updateSlider(input)
        local relativeX = math.clamp((input.Position.X - sliderBar.AbsolutePosition.X) / sliderBar.AbsoluteSize.X, 0, 1)
        local value = math.floor(minValue + (maxValue - minValue) * relativeX)
        
        TweenService:Create(sliderFill, TweenInfo.new(0.15), {Size = UDim2.new(relativeX, 0, 1, 0)}):Play()
        TweenService:Create(sliderThumb, TweenInfo.new(0.15), {Position = UDim2.new(relativeX, 0, 0.5, 0)}):Play()
        
        valueLabel.Text = tostring(value)
        spawn(function()
            callback(value)
        end)
    end
    
    sliderBar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            updateSlider(input)
        end
    end)
    
    sliderBar.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = false
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            updateSlider(input)
        end
    end)
    
    return sliderFrame
end

-- üìù Textbox Component
function Library:AddTextbox(tab, config)
    config = config or {}
    local textboxText = config.Text or "Textbox"
    local placeholder = config.Placeholder or "Enter text..."
    local callback = config.Callback or function() end
    
    local textboxFrame = Instance.new("Frame")
    textboxFrame.Name = "Textbox"
    textboxFrame.Size = UDim2.new(1, -10, 0, 55)
    textboxFrame.BackgroundColor3 = self:GetTheme().Secondary
    textboxFrame.BorderSizePixel = 0
    textboxFrame.Parent = tab.Frame
    
    local textboxCorner = Instance.new("UICorner")
    textboxCorner.CornerRadius = UDim.new(0, 8)
    textboxCorner.Parent = textboxFrame
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -30, 0, 20)
    label.Position = UDim2.new(0, 15, 0, 8)
    label.BackgroundTransparency = 1
    label.Font = Enum.Font.Gotham
    label.Text = textboxText
    label.TextColor3 = self:GetTheme().Text
    label.TextSize = 14
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = textboxFrame
    
    local inputBox = Instance.new("TextBox")
    inputBox.Size = UDim2.new(1, -30, 0, 26)
    inputBox.Position = UDim2.new(0, 15, 1, -32)
    inputBox.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
    inputBox.BorderSizePixel = 0
    inputBox.Font = Enum.Font.Gotham
    inputBox.PlaceholderText = placeholder
    inputBox.PlaceholderColor3 = self:GetTheme().TextDim
    inputBox.Text = ""
    inputBox.TextColor3 = self:GetTheme().Text
    inputBox.TextSize = 13
    inputBox.TextXAlignment = Enum.TextXAlignment.Left
    inputBox.Parent = textboxFrame
    
    local inputPadding = Instance.new("UIPadding")
    inputPadding.PaddingLeft = UDim.new(0, 10)
    inputPadding.PaddingRight = UDim.new(0, 10)
    inputPadding.Parent = inputBox
    
    local inputCorner = Instance.new("UICorner")
    inputCorner.CornerRadius = UDim.new(0, 6)
    inputCorner.Parent = inputBox
    
    local inputStroke = Instance.new("UIStroke")
    inputStroke.Color = self:GetTheme().Border
    inputStroke.Thickness = 1
    inputStroke.Transparency = 0.7
    inputStroke.Parent = inputBox
    
    inputBox.Focused:Connect(function()
        TweenService:Create(inputStroke, TweenInfo.new(0.2), {
            Color = self:GetTheme().Accent,
            Transparency = 0
        }):Play()
    end)
    
    inputBox.FocusLost:Connect(function()
        TweenService:Create(inputStroke, TweenInfo.new(0.2), {
            Color = self:GetTheme().Border,
            Transparency = 0.7
        }):Play()
        spawn(function()
            callback(inputBox.Text)
        end)
    end)
    
    return textboxFrame
end

-- üìã Dropdown Component
function Library:AddDropdown(tab, config)
    config = config or {}
    local dropdownText = config.Text or "Dropdown"
    local options = config.Options or {"Option 1", "Option 2", "Option 3"}
    local callback = config.Callback or function() end
    
    local dropdownFrame = Instance.new("Frame")
    dropdownFrame.Name = "Dropdown"
    dropdownFrame.Size = UDim2.new(1, -10, 0, 55)
    dropdownFrame.BackgroundColor3 = self:GetTheme().Secondary
    dropdownFrame.BorderSizePixel = 0
    dropdownFrame.ClipsDescendants = true
    dropdownFrame.Parent = tab.Frame
    
    local dropdownCorner = Instance.new("UICorner")
    dropdownCorner.CornerRadius = UDim.new(0, 8)
    dropdownCorner.Parent = dropdownFrame
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -30, 0, 20)
    label.Position = UDim2.new(0, 15, 0, 8)
    label.BackgroundTransparency = 1
    label.Font = Enum.Font.Gotham
    label.Text = dropdownText
    label.TextColor3 = self:GetTheme().Text
    label.TextSize = 14
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = dropdownFrame
    
    local selectedLabel = Instance.new("TextLabel")
    selectedLabel.Size = UDim2.new(1, -50, 0, 26)
    selectedLabel.Position = UDim2.new(0, 15, 0, 26)
    selectedLabel.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
    selectedLabel.BorderSizePixel = 0
    selectedLabel.Font = Enum.Font.Gotham
    selectedLabel.Text = options[1] or "Select..."
    selectedLabel.TextColor3 = self:GetTheme().Text
    selectedLabel.TextSize = 13
    selectedLabel.TextXAlignment = Enum.TextXAlignment.Left
    selectedLabel.Parent = dropdownFrame
    
    local selectedPadding = Instance.new("UIPadding")
    selectedPadding.PaddingLeft = UDim.new(0, 10)
    selectedPadding.Parent = selectedLabel
    
    local selectedCorner = Instance.new("UICorner")
    selectedCorner.CornerRadius = UDim.new(0, 6)
    selectedCorner.Parent = selectedLabel
    
    local arrow = Instance.new("TextLabel")
    arrow.Size = UDim2.new(0, 20, 0, 26)
    arrow.Position = UDim2.new(1, -30, 0, 26)
    arrow.BackgroundTransparency = 1
    arrow.Font = Enum.Font.GothamBold
    arrow.Text = "‚ñº"
    arrow.TextColor3 = self:GetTheme().TextDim
    arrow.TextSize = 12
    arrow.Parent = dropdownFrame
    
    local optionsFrame = Instance.new("Frame")
    optionsFrame.Size = UDim2.new(1, -30, 0, #options * 30)
    optionsFrame.Position = UDim2.new(0, 15, 0, 58)
    optionsFrame.BackgroundTransparency = 1
    optionsFrame.Parent = dropdownFrame
    
    local optionsLayout = Instance.new("UIListLayout")
    optionsLayout.Padding = UDim.new(0, 3)
    optionsLayout.Parent = optionsFrame
    
    local expanded = false
    
    local function toggleDropdown()
        expanded = not expanded
        local targetSize = expanded and UDim2.new(1, -10, 0, 65 + #options * 30) or UDim2.new(1, -10, 0, 55)
        
        TweenService:Create(dropdownFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad), {Size = targetSize}):Play()
        TweenService:Create(arrow, TweenInfo.new(0.3), {Rotation = expanded and 180 or 0}):Play()
    end
    
    selectedLabel.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            toggleDropdown()
        end
    end)
    
    for _, option in ipairs(options) do
        local optionButton = Instance.new("TextButton")
        optionButton.Size = UDim2.new(1, 0, 0, 27)
        optionButton.BackgroundColor3 = Color3.fromRGB(50, 50, 60)
        optionButton.BorderSizePixel = 0
        optionButton.Font = Enum.Font.Gotham
        optionButton.Text = option
        optionButton.TextColor3 = self:GetTheme().Text
        optionButton.TextSize = 12
        optionButton.Parent = optionsFrame
        
        local optionCorner = Instance.new("UICorner")
        optionCorner.CornerRadius = UDim.new(0, 5)
        optionCorner.Parent = optionButton
        
        optionButton.MouseEnter:Connect(function()
            TweenService:Create(optionButton, TweenInfo.new(0.15), {
                BackgroundColor3 = self:GetTheme().Accent
            }):Play()
        end)
        
        optionButton.MouseLeave:Connect(function()
            TweenService:Create(optionButton, TweenInfo.new(0.15), {
                BackgroundColor3 = Color3.fromRGB(50, 50, 60)
            }):Play()
        end)
        
        optionButton.MouseButton1Click:Connect(function()
            selectedLabel.Text = option
            toggleDropdown()
            spawn(function()
                callback(option)
            end)
        end)
    end
    
    return dropdownFrame
end

-- üè∑Ô∏è Label Component
function Library:AddLabel(tab, config)
    config = config or {}
    local labelText = config.Text or "Label"
    
    local label = Instance.new("TextLabel")
    label.Name = "Label"
    label.Size = UDim2.new(1, -10, 0, 30)
    label.BackgroundColor3 = self:GetTheme().Secondary
    label.BorderSizePixel = 0
    label.Font = Enum.Font.Gotham
    label.Text = labelText
    label.TextColor3 = self:GetTheme().Text
    label.TextSize = 14
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.TextTransparency = 1
    label.Parent = tab.Frame
    
    local labelPadding = Instance.new("UIPadding")
    labelPadding.PaddingLeft = UDim.new(0, 15)
    labelPadding.Parent = label
    
    local labelCorner = Instance.new("UICorner")
    labelCorner.CornerRadius = UDim.new(0, 8)
    labelCorner.Parent = label
    
    TweenService:Create(label, TweenInfo.new(0.4), {TextTransparency = 0}):Play()
    
    return label
end

-- üìä Initialize and Return Library
return Library
