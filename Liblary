-- Lightweight Roblox UI Library (Polished, Smooth, Draggable)
-- Author: ChatGPT (GPT-5)
-- Lightweight but clean and functional UI library

--// Services
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

--// Theme
local Theme = {
    Background = Color3.fromRGB(25, 25, 25),
    Accent = Color3.fromRGB(0, 170, 255),
    Text = Color3.fromRGB(255, 255, 255),
    Section = Color3.fromRGB(35, 35, 35),
    Button = Color3.fromRGB(45, 45, 45)
}

--// Library Table
local UILib = {}
UILib.__index = UILib

--// Tween Utility
local function Tween(obj, props, time)
    TweenService:Create(obj, TweenInfo.new(time or 0.2, Enum.EasingStyle.Sine, Enum.EasingDirection.Out), props):Play()
end

--// Drag Function
local function MakeDraggable(frame, dragButton)
    local dragging = false
    local dragStart, startPos

    dragButton.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = frame.Position
        end
    end)

    dragButton.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = false
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local delta = input.Position - dragStart
            Tween(frame, {Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)}, 0.05)
        end
    end)
end

--// Create Window
function UILib.CreateWindow(title)
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "UILib"
    ScreenGui.ResetOnSpawn = false
    ScreenGui.IgnoreGuiInset = true
    ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

    local Frame = Instance.new("Frame")
    Frame.Size = UDim2.new(0, 350, 0, 400)
    Frame.Position = UDim2.new(0.5, -175, 0.5, -200)
    Frame.BackgroundColor3 = Theme.Background
    Frame.BorderSizePixel = 0
    Frame.Active = true
    Frame.Parent = ScreenGui

    local UICorner = Instance.new("UICorner", Frame)
    UICorner.CornerRadius = UDim.new(0, 8)

    local Header = Instance.new("Frame")
    Header.Size = UDim2.new(1, 0, 0, 35)
    Header.BackgroundColor3 = Theme.Section
    Header.Parent = Frame

    local Title = Instance.new("TextLabel")
    Title.Text = title or "Window"
    Title.Font = Enum.Font.GothamBold
    Title.TextColor3 = Theme.Text
    Title.TextSize = 16
    Title.BackgroundTransparency = 1
    Title.Size = UDim2.new(1, -10, 1, 0)
    Title.Position = UDim2.new(0, 10, 0, 0)
    Title.TextXAlignment = Enum.TextXAlignment.Left
    Title.Parent = Header

    MakeDraggable(Frame, Header)

    local Content = Instance.new("ScrollingFrame")
    Content.Size = UDim2.new(1, 0, 1, -35)
    Content.Position = UDim2.new(0, 0, 0, 35)
    Content.CanvasSize = UDim2.new(0, 0, 0, 0)
    Content.ScrollBarThickness = 4
    Content.BackgroundTransparency = 1
    Content.Parent = Frame

    local Layout = Instance.new("UIListLayout", Content)
    Layout.Padding = UDim.new(0, 6)
    Layout.FillDirection = Enum.FillDirection.Vertical
    Layout.HorizontalAlignment = Enum.HorizontalAlignment.Center

    Layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        Content.CanvasSize = UDim2.new(0, 0, 0, Layout.AbsoluteContentSize.Y + 10)
    end)

    --// Window Functions
    local Window = {}

    function Window:AddButton(text, callback)
        local Button = Instance.new("TextButton")
        Button.Size = UDim2.new(0.9, 0, 0, 30)
        Button.BackgroundColor3 = Theme.Button
        Button.Text = text
        Button.Font = Enum.Font.Gotham
        Button.TextColor3 = Theme.Text
        Button.TextSize = 14
        Button.Parent = Content

        local Corner = Instance.new("UICorner", Button)
        Corner.CornerRadius = UDim.new(0, 6)

        Button.MouseEnter:Connect(function()
            Tween(Button, {BackgroundColor3 = Theme.Accent}, 0.2)
        end)
        Button.MouseLeave:Connect(function()
            Tween(Button, {BackgroundColor3 = Theme.Button}, 0.2)
        end)
        Button.MouseButton1Click:Connect(function()
            if callback then callback() end
        end)
    end

    function Window:AddToggle(text, default, callback)
        local ToggleFrame = Instance.new("Frame")
        ToggleFrame.Size = UDim2.new(0.9, 0, 0, 30)
        ToggleFrame.BackgroundColor3 = Theme.Section
        ToggleFrame.Parent = Content

        local Label = Instance.new("TextLabel")
        Label.Text = text
        Label.Font = Enum.Font.Gotham
        Label.TextColor3 = Theme.Text
        Label.TextSize = 14
        Label.BackgroundTransparency = 1
        Label.Size = UDim2.new(1, -40, 1, 0)
        Label.Position = UDim2.new(0, 10, 0, 0)
        Label.TextXAlignment = Enum.TextXAlignment.Left
        Label.Parent = ToggleFrame

        local Toggle = Instance.new("Frame")
        Toggle.Size = UDim2.new(0, 20, 0, 20)
        Toggle.Position = UDim2.new(1, -30, 0.5, -10)
        Toggle.BackgroundColor3 = default and Theme.Accent or Theme.Button
        Toggle.Parent = ToggleFrame

        local Corner = Instance.new("UICorner", Toggle)
        Corner.CornerRadius = UDim.new(1, 0)

        local state = default or false

        ToggleFrame.InputBegan:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 then
                state = not state
                Tween(Toggle, {BackgroundColor3 = state and Theme.Accent or Theme.Button}, 0.2)
                if callback then callback(state) end
            end
        end)
    end

    function Window:ToggleVisibility()
        local visible = Frame.Visible
        Tween(Frame, {Size = visible and UDim2.new(0, 350, 0, 0) or UDim2.new(0, 350, 0, 400)}, 0.25)
        Frame.Visible = not visible
    end

    return setmetatable(Window, UILib)
end

return UILib
