local BetaUILib = {}
BetaUILib.__index = BetaUILib

-- Helper function to create new instances
function BetaUILib.new()
    local self = setmetatable({}, BetaUILib)
    self.UIElements = {}
    self.KeybindEnabled = false  -- Flag for keybind feature
    self.Keybind = Enum.KeyCode.Space  -- Default keybind (can be changed)
    return self
end

-- Function to create a window with customized intro and styles
function BetaUILib:MakeWindow(config)
    local window = Instance.new("ScreenGui")
    window.Name = config.Name or "BetaWindow"
    window.DisplayOrder = 1
    window.ResetOnSpawn = false
    window.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

    -- Window background
    local frame = Instance.new("Frame")
    frame.Parent = window
    frame.Size = UDim2.new(0, 600, 0, 400)  -- Medium window size
    frame.Position = UDim2.new(0.5, -300, 0.5, -200)  -- Centered
    frame.BackgroundColor3 = Color3.fromRGB(36, 36, 36)
    frame.BorderSizePixel = 0
    frame.ClipsDescendants = true
    frame.Name = "MainFrame"

    -- Corner radius for rounded edges
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 20)
    corner.Parent = frame

    -- Title bar for the window (with Minimize and Close buttons)
    local titleBar = Instance.new("Frame")
    titleBar.Parent = frame
    titleBar.Size = UDim2.new(1, 0, 0, 40)
    titleBar.BackgroundColor3 = Color3.fromRGB(48, 48, 48)
    titleBar.BorderSizePixel = 0
    titleBar.Name = "TitleBar"

    -- Close Button (X)
    local closeButton = Instance.new("TextButton")
    closeButton.Parent = titleBar
    closeButton.Size = UDim2.new(0, 40, 0, 40)
    closeButton.Position = UDim2.new(1, -40, 0, 0)
    closeButton.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
    closeButton.Text = "X"
    closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    closeButton.TextSize = 18
    closeButton.BorderSizePixel = 0
    closeButton.Name = "CloseButton"

    closeButton.MouseButton1Click:Connect(function()
        window:Destroy()
    end)

    -- Minimize Button
    local minimizeButton = Instance.new("TextButton")
    minimizeButton.Parent = titleBar
    minimizeButton.Size = UDim2.new(0, 40, 0, 40)
    minimizeButton.Position = UDim2.new(1, -80, 0, 0)
    minimizeButton.BackgroundColor3 = Color3.fromRGB(50, 50, 255)
    minimizeButton.Text = "-"
    minimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    minimizeButton.TextSize = 18
    minimizeButton.BorderSizePixel = 0
    minimizeButton.Name = "MinimizeButton"

    -- Minimize functionality
    local isMinimized = false
    minimizeButton.MouseButton1Click:Connect(function()
        if not isMinimized then
            -- Minimize the window
            local tweenService = game:GetService("TweenService")
            local goal = { Size = UDim2.new(1, 0, 0, 40) }
            local tween = tweenService:Create(frame, TweenInfo.new(0.3, Enum.EasingStyle.Quint, Enum.EasingDirection.Out), goal)
            tween:Play()

            -- Hide content and only show title bar
            local contentGoal = { Size = UDim2.new(1, 0, 0, 0) }
            local contentTween = tweenService:Create(frame:WaitForChild("Content"), TweenInfo.new(0.3, Enum.EasingStyle.Quint, Enum.EasingDirection.Out), contentGoal)
            contentTween:Play()

            isMinimized = true
        else
            -- Maximize the window back
            local tweenService = game:GetService("TweenService")
            local goal = { Size = UDim2.new(0, 600, 0, 400) }
            local tween = tweenService:Create(frame, TweenInfo.new(0.3, Enum.EasingStyle.Quint, Enum.EasingDirection.Out), goal)
            tween:Play()

            -- Show content again
            local contentGoal = { Size = UDim2.new(1, 0, 1, -40) }
            local contentTween = tweenService:Create(frame:WaitForChild("Content"), TweenInfo.new(0.3, Enum.EasingStyle.Quint, Enum.EasingDirection.Out), contentGoal)
            contentTween:Play()

            isMinimized = false
        end
    end)

    -- Title Label
    local titleLabel = Instance.new("TextLabel")
    titleLabel.Parent = titleBar
    titleLabel.Size = UDim2.new(1, -80, 1, 0)
    titleLabel.BackgroundTransparency = 1
    titleLabel.Text = config.Name or "Beta Library"
    titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    titleLabel.TextSize = 20
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left
    titleLabel.TextYAlignment = Enum.TextYAlignment.Center
    titleLabel.PaddingLeft = 10

    -- Intro Text Animation
    local introLabel = Instance.new("TextLabel")
    introLabel.Parent = window
    introLabel.Size = UDim2.new(0, 600, 0, 100)
    introLabel.Position = UDim2.new(0.5, -300, 0.5, -150)
    introLabel.BackgroundTransparency = 1
    introLabel.Text = "Beta Library - Loading..."
    introLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    introLabel.TextSize = 30
    introLabel.TextStrokeTransparency = 0.5
    introLabel.TextXAlignment = Enum.TextXAlignment.Center
    introLabel.TextYAlignment = Enum.TextYAlignment.Center

    -- Tween the intro
    local tweenService = game:GetService("TweenService")
    local goal = { TextTransparency = 1 }
    local tween = tweenService:Create(introLabel, TweenInfo.new(2, Enum.EasingStyle.Linear, Enum.EasingDirection.Out), goal)
    tween:Play()
    tween.Completed:Connect(function()
        introLabel:Destroy()
    end)

    -- Draggable functionality
    local dragging = false
    local dragInput, dragStart, startPos

    titleBar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = frame.Position
        end
    end)

    titleBar.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local delta = input.Position - dragStart
            frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)

    titleBar.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = false
        end
    end)

    -- Add to the UI elements table
    table.insert(self.UIElements, window)
    
    -- Add a content frame
    local contentFrame = Instance.new("Frame")
    contentFrame.Parent = frame
    contentFrame.Size = UDim2.new(1, 0, 1, -40)  -- Below title bar
    contentFrame.Position = UDim2.new(0, 0, 0, 40)
    contentFrame.BackgroundTransparency = 1
    contentFrame.Name = "Content"

    -- Add content to the contentFrame (can be customized later)
    local scriptSection = Instance.new("TextBox")
    scriptSection.Parent = contentFrame
    scriptSection.Size = UDim2.new(1, 0, 0, 200)
    scriptSection.Position = UDim2.new(0, 0, 0, 20)
    scriptSection.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    scriptSection.Text = "Script Section"
    scriptSection.TextColor3 = Color3.fromRGB(0, 0, 0)
    scriptSection.TextSize = 16
    scriptSection.Multiline = true
    scriptSection.TextWrapped = true
    scriptSection.TextXAlignment = Enum.TextXAlignment.Left
    scriptSection.TextYAlignment = Enum.TextYAlignment.Top

    return window
end

-- Example usage:
local ui = BetaUILib.new()
local window = ui:MakeWindow({ Name = "Beta Library UI" })
